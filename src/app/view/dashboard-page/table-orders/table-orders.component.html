<div>
    <div class="row">
        <div class="col">
            <h2 class="mt-3">Orders List</h2>
        </div>
        <div class="col">
            <mat-paginator
            [pageSize]="itemsPerPage"
            [pageIndex]="currentPage - 1"
            [length]="ordersDbService.getTotalOrdersCount()"
            [pageSizeOptions]="[2, 5, 10]"
            aria-label="Select page"
            (page)="onChange($event)">
            </mat-paginator>
        </div>
    </div>
    
    <mat-table [dataSource]="orders" class="mat-elevation-z8">
        <ng-container matColumnDef="id">
            <mat-header-cell *matHeaderCellDef class="mat-column-id">ID</mat-header-cell>
            <mat-cell *matCellDef="let order" class="mat-column-id">{{ order.id }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="maked">
            <mat-header-cell *matHeaderCellDef class="mat-column-maked">Maked</mat-header-cell>
            <mat-cell *matCellDef="let order" class="mat-column-maked">{{ order.maked }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="slot">
            <mat-header-cell *matHeaderCellDef class="mat-column-slot">Slot</mat-header-cell>
            <mat-cell *matCellDef="let order" class="mat-column-slot">{{ order.slot?.time }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="price">
            <mat-header-cell *matHeaderCellDef class="mat-column-price">Price</mat-header-cell>
            <mat-cell *matCellDef="let order" class="mat-column-price">{{ order.price }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="datetime">
            <mat-header-cell *matHeaderCellDef class="mat-column-date">Date and Time</mat-header-cell>
            <mat-cell *matCellDef="let order" class="mat-column-date">{{ order.datetime | date }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="dishes">
            <mat-header-cell *matHeaderCellDef>Dishes</mat-header-cell>
            <mat-cell *matCellDef="let order">
                <ul style="list-style: none; padding: 0;">
                    @for (dish of order.dishes; track $index) {
                    <li style="display: flex; align-items: center;">
                        {{ dish.name }}
                        <mat-icon aria-hidden="false" fontIcon="delete" (click)="removeDishFromOrder(order.id, dish.id)"></mat-icon>
                    </li>}
                </ul>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="actions">
            <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
            <mat-cell *matCellDef="let order">
                <button class="button" mat-mini-fab color="primary" (click)="addDishToOrderWithAlert(order.id)">
                    <mat-icon aria-hidden="false" fontIcon="add"></mat-icon>
                </button>
                <button class="button" mat-mini-fab color="warn" (click)="removeOrder(order.id)">
                    <mat-icon aria-hidden="false" fontIcon="delete"></mat-icon>
                </button>
            </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
    </mat-table>
    
    
</div>
