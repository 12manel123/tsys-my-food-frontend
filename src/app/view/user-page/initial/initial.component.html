<main class="body"><br>

    <div class="container card marketing p-4"><br>

      @if(menus){

        <h2 class="text-center text-primary"><b> TODAY'S MENU </b></h2>
      <div class="row">

        <!-- /.col-lg-3 -->
        <div class="col-lg-3 menu">
          <img  mat-card-md-image src="{{menus.appetizer.image}}" class="menu-img img-fluid rounded-circle shadow  mb-2" alt="{{menus.appetizer.name}}">
          <h2 class="">{{menus.appetizer.name}}</h2>
          <p>{{menus.appetizer.description}}</p>
          <p>{{menus.first.category}}</p>
        </div>

        <!-- /.col-lg-3 -->
        <div class="col-lg-3 menu">
          <img mat-card-md-image src="{{menus.first.image}}" class="menu-img img-fluid rounded-circle shadow mb-2" alt="{{menus.first.name}}">
          <h2>{{menus.first.name}}</h2>
          <p>{{menus.first.description}}</p>
          <p>{{menus.first.category}}</p>
        </div>

        <!-- /.col-lg-3 -->
        <div class="col-lg-3 menu">
          <img mat-card-md-image src="{{menus.second.image}}" class="menu-img img-fluid rounded-circle shadow  mb-2"alt="{{menus.second.name}}">
          <h2>{{menus.second.name}}</h2>
          <p>{{menus.second.description}}</p>
          <p>{{menus.second.category}}</p>
        </div>

        <!-- /.col-lg-3 -->
        <div class="col-lg-3 menu">
          <img mat-card-md-image src="{{menus.dessert.image}}" class="menu-img img-fluid rounded-circle shadow  mb-2" alt="{{menus.dessert.name}}">
          <h2>{{menus.dessert.name}}</h2>
          <p>{{menus.dessert.description}}</p>
          <p>{{menus.dessert.category}}</p>
        </div>


      </div>
      <!-- /.row -->
      <div class="row">
        <button mat-raised-button color="primary mx-auto w-50"
        data-bs-toggle="offcanvas"
        data-bs-target="#staticBackdrop"
        aria-controls="staticBackdrop"
        (click)="addMenu(menus)"><b>ADD MENU</b></button>
      </div>

      }
      @else {
        <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img src="../../../../assets/img/photo1.webp" class="d-block" alt="...">
              <div class="carousel-caption d-none d-md-block">
                <p class="fs-1">Appetizer</p>
                <p><b>Choose from our selection of dishes.</b></p>
              </div>
            </div>
            <div class="carousel-item">
              <img src="../../../../assets/img/photo3.webp" class="d-block " alt="...">
              <div class="carousel-caption d-none d-md-block">
                <p class="fs-1">Firts</p>
                <p><b>With the best quality and KM O</b></p>
              </div>
            </div>
            <div class="carousel-item">
              <img src="../../../../assets/img/photo2.webp" class="d-block" alt="...">
              <div class="carousel-caption d-none d-md-block">
                <p class="fs-1">Desserts</p>
                <p><b>Great variety of desserts.</b></p>
              </div>
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>

      }


      <hr class="featurette-divider">

      <!-- bar of ships and filters -->

        <div class="navbar row bg-light">
          <!-- /.col-lg-4 -->
          <div class="col-lg-4 mt-3 ">
            <button mat-raised-button color="accent mx-1" (click)="allDishes()">All</button>
            <button mat-button [matMenuTriggerFor]="menu" color="accent mx-1" >Specials for....</button>
            <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="fliterForAtrttibute('VEGAN')">Vegan</button>
              <button mat-menu-item (click)="fliterForAtrttibute('VEGETARIAN')">Vegeterian</button>
              <button mat-menu-item (click)="fliterForAtrttibute('CELIAC')">Suitable for celiacs</button>
              <button mat-menu-item (click)="fliterForAtrttibute('LACTOSE')">Without lactose</button>
              <button mat-menu-item (click)="fliterForAtrttibute('NUTS')">Sin Frutos Secos</button>
            </mat-menu>

          </div>
            <!-- /.col-lg-8 -->
          <div class="col-lg-8 text-end mt-2">

            <mat-button-toggle-group name="fontStyle" aria-label="Font Style">
              <mat-button-toggle (click)="fliterForApptizer()" value="bold">Appetizer</mat-button-toggle >
              <mat-button-toggle (click)="fliterForFirsts()" value="italic">Firts</mat-button-toggle>
              <mat-button-toggle (click)="fliterForSeconds()" value="underline">Seconds</mat-button-toggle>
              <mat-button-toggle (click)="fliterForDesserts()" value="underline">Desserts</mat-button-toggle>
            </mat-button-toggle-group>
          </div>
        </div>

      <!-- /.row -->

        @if(listDishes.length != 0){

         <div class="row mt-4">

           <!-- dish cards -->
        @for(dish of listDishes; track $index){
          <div class="col-lg-3 mt-3">
            <mat-card class="example-card">
              <mat-card-header>
                <mat-card-title-group>
                  <mat-card-title>{{dish.name}}</mat-card-title>
                  <mat-card-subtitle>{{dish.price | currency:'EUR' }}</mat-card-subtitle>
                  <img mat-card-md-image src="{{dish.image}}}" alt="Image of a Shiba Inu" class="img-fluid rounded-circle">
                </mat-card-title-group>
              </mat-card-header>
              <mat-card-content class="mt-2">
                {{dish.description}}
                <div class="row mt-2">
                  <div class="col-4 text-start">
                    {{dish.attributes}}
                  </div>
                  <div class="col-4 text-center">
                    {{dish.category | uppercase }}
                  </div>
                  <div class="col-4 text-end">
                    <button mat-mini-fab color="accent" aria-label="Example icon button with a plus one icon"
                      (click)="addCard(dish)"
                      data-bs-toggle="offcanvas"
                      data-bs-target="#staticBackdrop"
                      aria-controls="staticBackdrop">
                      <mat-icon class="mx-2" aria-hidden="false"
                      fontIcon="shopping_cart"></mat-icon></button>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
          }
        </div>
        }
        @else {
          <div class="row mt-4">
            <div class="col-lg-12 mt-2">
              <div class="alert alert-info" role="alert">
             <h2 class="text-center text-primary"><b>Today we do not have any available dishes</b></h2>
             <h5 class="text-center text-primary"><b>Enjoy our selection of menus.</b></h5>
              </div>
            </div>
          </div>
        }


      <!-- order bar -->
      <div class="offcanvas offcanvas-start" data-bs-backdrop="static" tabindex="-1" id="staticBackdrop" aria-labelledby="staticBackdropLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="staticBackdropLabel">Your Order</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <div>
            <div class="col text-center mb-4">
              <span class="fs-4 mb-4 text-primary">Total: </span>
              <span class="fs-4 mb-4 text-primary">{{totalPrice | currency:'EUR' }}</span>
            </div>

            <ol class="list-group">

              @for (item of listDishesShow ; track $index) {
                <li class="list-group-item d-flex justify-content-between align-items-start">
                  <div class="ms-2 me-auto">
                    <div class="fw-bold">{{item.name}}</div>
                    @if(item.price != 0){
                       {{item.price | currency:'EUR' }}
                    }
                    @else {
                      <span class="badge bg-primary rounded-pill">Menu</span>
                    }

                      <span class=""></span>
                    </div>
                    <span>
                      <button mat-icon-button color="accent text-end" aria-label="Example icon button with a plus one icon"
                      (click)="removeCard($index)"> <mat-icon aria-hidden="false"
                        fontIcon="remove_shopping_cart"></mat-icon></button>
                    </span>
                </li>
                }
              </ol>
              <div class="row mt-4">
                <div class="col-6">
                    <button mat-raised-button color="primary mx-auto w-100" (click)="aceptarOrden()"><b>Confirm</b></button>
                </div>
                <div class="col-6">
                    <button mat-raised-button color="warn mx-auto w-100" (click)="cancelPedido()"><b>Cancel</b></button>
                </div>
              </div>
              <div class="col-12">
                <button mat-raised-button color="mx-auto w-100" class="bg-success mt-4 text-light"  data-bs-dismiss="offcanvas" aria-label="Close"><b>Continue shopping</b></button>
            </div>
          </div>
        </div>
      </div>
    </div>



</main>

